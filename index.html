<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>cube</title>
  </head>
  <body>
    <a-scene>
      <a-assets>
        <audio
          id="musicmodern"
          src="assets/MusicModern.mp3"
          preload="auto"
          loop="true"
        ></audio>

        <a-asset-item
          id="deskmodern"
          src="assets/DeskModern.glb"
        ></a-asset-item>

        <a-asset-item id="DeskBell" src="assets/DeskBell.glb"></a-asset-item>

        <a-asset-item
          id="StairsModern"
          src="assets/StairsModern.glb"
        ></a-asset-item>
      </a-assets>

      <!-- Utilisation du modèle GLTF -->
      <a-entity id="le-bureau" gltf-model="assets/DeskModern.glb" position="-0.08836 0.89162 -7.16339" scale="0.04 0.04 0.05">
      </a-entity>
      </a-entity>
      <a-entity id="la-sonnette" gltf-model="assets/DeskBell.glb" position="-0.12291 1.10928 -5.50302" scale="10 10 10" material="color: red"></a-entity>
      <!-- Structure Hotel -->
      <a-plane
        id="sol-principal"
        position="0 0 0"
        rotation="-90 0 0"
        width="40"
        height="40"
        color="#CCCCCC"
      >
      </a-plane>

      <a-box
        id="mur-fond"
        position="0 4 -9.70982"
        width="20"
        height="8"
        depth="0.5"
        color="#AAAAAA"
      >
      </a-box>
      <a-box
        id="mur-gauche"
        position="-10 4 0"
        rotation="0 90 0"
        width="20"
        height="8"
        depth="0.5"
        color="#999"
      ></a-box>
      <a-box
        id="mur-droit"
        position="10 4 0"
        rotation="0 90 0"
        width="20"
        height="8"
        depth="0.5"
        color="#999"
      ></a-box>

      <a-plane
        position="0 8 0"
        rotation="90 0 0"
        width="40"
        height="40"
        color="#FFF"
      ></a-plane>

<a-entity id="StairsModern" gltf-model="assets/StairsModern.glb" position="6.30182 -0.08261 -1.92178" scale="0.3 0.25 0.25" rotation="1.03017811564522 -90 0.6199403343315507"></a-entity><a-box id="mur-stairs-1" position="7.49761 4 4.5707" rotation="0 90 0" width="20" height="8" depth="0.5" color="#999" geometry="depth: 3; width: 11.61"></a-box>      <a-sky color="#ECECEC"></a-sky>
<a-box id="mur-stairs-2" position="7.99503 4 -6.73525" rotation="0 90 0" width="20" height="8" depth="0.5" color="#999" geometry="depth: 4; width: 8"></a-box>      <!-- Sound Hotel -->

      <a-sound
        id="musicmodern"
        src="#musicmodern"
        autoplay="true"
        loop="true"
        positional="false"
        volume="0.3"    
      >
      </a-sound>
    </a-scene>

    <script>
      // Forcer le lancement automatique de la musique
      document.addEventListener("DOMContentLoaded", function () {
        const scene = document.querySelector("a-scene");

        scene.addEventListener("loaded", function () {
          setTimeout(function () {
            const sound = document.querySelector("#musicmodern");
            const audioEl = document.querySelector("#musicmodern");

            // Forcer le volume à 0.3
            if (audioEl) {
              audioEl.volume = 0.3;
            }

            // Essayer de lancer avec A-Frame
            if (sound && sound.components.sound) {
              sound.components.sound.playSound();
            }

            // Essayer de lancer directement l'élément audio HTML
            if (audioEl) {
              audioEl
                .play()
                .catch((err) => console.log("Autoplay bloqué:", err));
            }
          }, 500);
        });
      });

    </script>
    <script type="module" src="/src/main.js"></script>
  </body>
</html>
